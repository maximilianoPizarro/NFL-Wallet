# NFL Stadium Wallet - Devfile for Red Hat OpenShift Dev Spaces
# Architecture: Vue 3 (frontend) + 3 .NET 8 APIs (ApiCustomers, ApiWalletBuffaloBills, ApiWalletLasVegasRaiders)
# This devfile runs the frontend in the workspace; run the APIs locally or via podman-compose.
schemaVersion: 2.2.2
metadata:
  name: nfl-wallet
  displayName: NFL Stadium Wallet
  description: |
    Full-stack NFL Stadium Wallet: Vue 3 + Vite frontend and three .NET 8.0 APIs.
    - Frontend: Vue 3, Vite, vue-router (run in this workspace).
    - APIs: ApiCustomers, ApiWalletBuffaloBills, ApiWalletLasVegasRaiders (run locally or via podman-compose).
    Each API exposes Swagger at /api/swagger and allows CORS from the frontend origins.
  icon: https://raw.githubusercontent.com/dotnet/brand/main/logo/dotnet-logo.png
  tags:
    - Vue
    - .NET 8.0
    - NFL
  projectType: fullstack
  language: javascript
  version: 1.0.0

components:
  - name: webapp
    container:
      image: registry.access.redhat.com/ubi8/nodejs-20:latest
      args: ["tail", "-f", "/dev/null"]
      mountSources: true
      memoryLimit: 1Gi
      env:
        # Frontend calls these API base URLs from the browser (same host as dev server or where APIs are exposed)
        - name: VITE_API_CUSTOMERS_URL
          value: http://localhost:8080/api
        - name: VITE_API_BILLS_URL
          value: http://localhost:8081/api
        - name: VITE_API_RAIDERS_URL
          value: http://localhost:8082/api
      endpoints:
        - name: webapp
          targetPort: 5173
          protocol: http

commands:
  - id: build
    exec:
      component: webapp
      workingDir: ${PROJECT_SOURCE}/frontend
      commandLine: npm install

  - id: run
    exec:
      component: webapp
      workingDir: ${PROJECT_SOURCE}/frontend
      commandLine: npm run dev
