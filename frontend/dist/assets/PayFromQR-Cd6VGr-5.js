import{_ as h,o as w,c as r,i as B,w as C,b as s,p as V,t as n,j as x,v as P,k as _,d as l,u as R,e as D,m as b,f as u,n as I}from"./index-VrFRKUr5.js";import{p as L,h as S}from"./client-Dke6LjAJ.js";const U={class:"container mt-4"},F={key:0,class:"pay-qr-invalid"},M={class:"card-header"},Q={class:"card-body"},T={class:"pay-qr-meta"},z={class:"pay-qr-form"},E=["disabled"],$={key:0,class:"pay-qr-error"},j={key:1,class:"pay-qr-success"},A={__name:"PayFromQR",setup(K){const p=R(),t=l(""),c=l(null),i=l(""),o=l(!1),d=l(""),v=l(""),m=l(""),f=b(()=>t.value==="bills"?"Buffalo Bills":t.value==="raiders"?"Las Vegas Raiders":""),y=b(()=>{const a=Number(i.value);return!isNaN(a)&&a>0});function k(){return(t.value==="bills"?L:S)(c.value,i.value)}async function g(){if(!(!y.value||o.value)){o.value=!0,d.value="",v.value="";try{const a=await k();v.value="OK",m.value=`${a.currency} ${Number(a.availableBalance).toLocaleString("en-US",{minimumFractionDigits:2})}`}catch(a){d.value=a.message||"Error al procesar el pago"}finally{o.value=!1}}}return w(()=>{t.value=(p.query.wallet||"").toLowerCase();const a=p.query.customerId;c.value=a!=null&&a!==""?Number(a):null}),(a,e)=>{const q=D("router-link");return u(),r("div",U,[B(q,{to:"/",class:"nfl-back-link"},{default:C(()=>[...e[1]||(e[1]=[I("â† Back to app",-1)])]),_:1}),!t.value||!c.value?(u(),r("div",F,[...e[2]||(e[2]=[s("p",null,"Invalid payment link. Use the QR from a wallet to pay.",-1)])])):(u(),r("div",{key:1,class:V(["card pay-qr-card",t.value==="bills"?"nfl-card-bills":"nfl-card-raiders"])},[s("div",M," Pagar desde "+n(f.value),1),s("div",Q,[s("p",T,"Customer ID: "+n(c.value),1),s("div",z,[e[3]||(e[3]=s("label",null,"Monto a descontar (USD)",-1)),x(s("input",{"onUpdate:modelValue":e[0]||(e[0]=N=>i.value=N),type:"number",min:"0",step:"0.01",placeholder:"0.00",class:"pay-qr-input"},null,512),[[P,i.value,void 0,{number:!0}]]),s("button",{type:"button",class:"pay-qr-btn",disabled:o.value||!y.value,onClick:g},n(o.value?"Procesando...":"Confirmar pago"),9,E)]),d.value?(u(),r("p",$,n(d.value),1)):_("",!0),v.value?(u(),r("p",j,"Pago realizado. Nuevo saldo: "+n(m.value),1)):_("",!0)])],2))])}}},H=h(A,[["__scopeId","data-v-b338140f"]]);export{H as default};
